Author: Rowan J. Gollan
Date: 2021-07-04


# First-time build environment setup

The website is built with Hugo using Doks theme. The Doks theme itself
makes use of Node.js to do some of the build.

1. Install hugo on your system.

2. Install Node.js on your system.

3. Install support modules in website area.

$ cd dgd/website
$ npm install

# Build

The makefile controls the build process. You will need dgd-docs in place to do this.

$ make

# Synchronisation to web server

Assuming you have a shortcut entry in your .ssh/config for "cfcfd".
My shortcut is:

  Host mango
  HostName mango.eait.uq.edu.au
  User uqrgolla
  ForwardX11 yes
  ForwardX11Trusted yes

  Host cfcfd
  HostName cfcfd.zones.eait.uq.edu.au
  User uqrgolla
  ProxyJump mango

Then, you can use the "sync" target to send a new version of the website to the webserver.

$ make sync

The rsync command will typically give you some warning/error about unable to change
certain file attributes. This is related to multiple user accounts trying to
write to the same area on the webserver. It won't affect what is displayed on the world wide web.

The sync target deliberately exclude sending the PDFs every time. To do that explicitly, issue:

$ make sync-pdfs


# Editing/adding content to Docs area

The majority of content resides in the directory content/docs.
In that area, there is a subdirectory for each section in the docs area.
In each subdirectory, the content is contained in text files (.md).
The names of the files will closely match the entries in the menus
on the website.

# Special pages

## Landing page
Control of the landing page is split across a few files in the Doks theme.

1. Edit the title and description in: 

  content/_index.md

2. Edit the boxes beneath title splash in:

  layouts/index.html

Note: for this you will edit in raw HTML (with some hugo shortcodes if convenient)

## Developer page

The top section of this page is controlled directly with HTML so that images and
text can be (somewhat) accurately positioned.

## Eilmer User Guides

This page also uses HTML so that the clickable report frontpages will remain
beside the accompanying text.

# Menu entries

1. High-level control of menu entries is in: config/_default/menus.toml

2. Local control of menu entries within a section is done in header for the markdown page.

# Images

1. Place images directly referenced in markdown files in: static/images/

2. For Catalogue of Examples, place images in: dgd/doc/gallery

3. For Reference manuals, place images in local subfolders in doc/











